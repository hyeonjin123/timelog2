<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>index</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Unna:wght@400&display=swap" rel="stylesheet">

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body {
      height: 100%;
      width: 100%;
      background-color: #1A1511;
      overflow: hidden;
      font-family: 'Manrope', sans-serif;
    }

    /* Unna Regular */
    .unna-regular {
      font-family: "Unna", serif;
      font-weight: 400;
      font-style: normal;
    }

    .top-right {
      position: fixed;
      top: 25px;
      right: 40px;
      display: flex;
      gap: 30px;
      font-size: 15px;
      color: white;
      z-index: 20;
      font-weight: 500;
    }
    .top-right a { color: white; text-decoration: none; transition: opacity 0.2s; }
    .top-right a:hover { opacity: 0.5; }

    .sound-button {
      position: fixed;
      bottom: 20px;
      right: 40px;
      font-size: 15px;
      color: white;
      cursor: pointer;
      z-index: 20;
      font-weight: 500;
    }

    .pov-home {
      position: fixed;
      top: 25px;
      left: 40px;
      font-size: 25px;
      font-weight: 600;
      cursor: pointer;
      z-index: 3005;
      transition: opacity .2s ease;

  /* ✅ 핵심: 완전 흰색 + difference로 자동 반전 */
  color: #fff;
  mix-blend-mode: difference;

  /* 배경-클립, 투명 텍스트 제거 (회색화 원인) */
  background: none;
  -webkit-background-clip: initial;
  background-clip: initial;
    }

    .video-corner {
      position: fixed;
      width: 640px;
      height: 360px;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      pointer-events: none;
      z-index: 3;
    }

    .corner {
      position: absolute;
      width: 20px;
      height: 20px;
      border: 1px solid white;
      transition: all 0.5s ease;
    }
    .top-left     { top: 0; left: 0; border-right: none; border-bottom: none; }
    .top-right-c  { top: 0; right: 0; border-left: none;  border-bottom: none; }
    .bottom-left  { bottom: 0; left: 0; border-top: none; border-right: none; }
    .bottom-right { bottom: 0; right: 0; border-left: none; border-top: none; }

    .corner.expand.top-left     { transform: translate(-250px, -100px); }
    .corner.expand.top-right-c  { transform: translate(250px, -100px); }
    .corner.expand.bottom-left  { transform: translate(-250px, 100px); }
    .corner.expand.bottom-right { transform: translate(250px, 100px); }

    #bg-video-container {
      position: fixed;
      top: 50%;
      left: 50%;
      width: 640px;
      height: 360px;
      transform: translate(-50%, -50%);
      overflow: hidden;
      z-index: 2;
      transition: all 1s ease;
      cursor: pointer;
    }
    #bg-video-container.active {
      width: 100vw;
      height: 100vh;
      transform: translate(-50%, -50%);
    }

    .progress-bar-wrapper {
      position: fixed;
      bottom: 40px;
      left: 50%;
      transform: translateX(-50%);
      width: 20%;
      height: 1px;
      background-color: rgba(255, 255, 255, 0.5);
      z-index: 25;
      display: none;
    }
    .progress-bar { height: 100%; background-color: white; width: 0%; }
    #bg-video-container.active + .progress-bar-wrapper { display: block; }

    #film-panel {
      position: fixed;
      top: 0;
      right: -100vw;
      width: 100vw;
      height: 100vh;
      background-color: #1A1511;
      z-index: 100;
      transition: right 0.8s ease;
      overflow: hidden;
    }
    #film-panel.show { right: 0; }
    #film-panel iframe { width: 100%; height: 100%; border: none; }

    .hidden-until-expanded { display: none !important; }

    .onoff-toggle {
      position: fixed;
      top: 25px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      align-items: center;
      font-size: 15px;
      font-weight: 500;
      color: white;
      z-index: 20;
      font-family: 'Manrope', sans-serif;
    }
    .onoff-toggle .line {
      width: 50px;
      height: 1px;
      background-color: white;
      margin: 0 5px;
      position: relative;
    }
    .onoff-toggle .circle {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background-color: white;
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      transition: left 0.5s ease;
    }
    .onoff-toggle.off .circle { left: 100%; transform: translate(-100%, -50%); }
    .onoff-toggle.on .circle  { left: 0%;   transform: translate(0%, -50%); }

    .video-overlay-texts {
      position: fixed;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 4;
    }

    .tag-box {
      position: absolute;
      top: 65%;
      left: calc(50% + 320px);
      transform: translateY(-50%);
      background-color: white;
      color: black;
      font-size: 14px;
      padding: 6px 12px;
      font-family: 'Manrope', sans-serif;
      font-weight: 500;
    }

    .year-label {
      position: fixed;
      bottom: 25px;
      left: 40px;
      font-size: 18px;
      font-weight: 500;
      color: white;
      font-family: 'Manrope', sans-serif;
      z-index: 30;
      pointer-events: none;
    }
    .hidden { display: none !important; }

    .crosshair {
      position: fixed;
      top: 50%;
      left: 50%;
      z-index: 180;
      pointer-events: none;
    }
    .crosshair .line { position: absolute; background-color: white; }
    .crosshair .vertical { width: 1px; height: 30px; left: -0.5px; top: -15px; }
    .crosshair .horizontal { width: 30px; height: 1px; left: -15px; top: -0.5px; }
    .film-page .crosshair { display: none; }

    #mobile-bg-image {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 0;
      overflow: hidden;
    }
    #mobile-bg-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      filter: grayscale(100%);
    }

    .scroll-slider {
      position: fixed;
      bottom: 60px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      align-items: center;
      z-index: 10;
    }
    .slider-line { width: 100px; height: 2px; background-color: white; position: relative; }
    .slider-circle {
      width: 10px; height: 10px; background-color: white; border-radius: 50%;
      position: absolute; top: 50%; transform: translate(-50%, -50%); left: 50%;
      transition: left 0.2s ease;
    }

    #blur-overlay {
      position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
      backdrop-filter: blur(20px);
      background-color: rgba(255, 255, 255, 0.1);
      z-index: 5;
      opacity: 0; pointer-events: none; transition: opacity 0.5s ease, backdrop-filter 0.2s ease;
    }
    #blur-overlay.show { opacity: 1; pointer-events: auto; }

    .custom-slider {
      position: fixed;
      bottom: 140px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 20;
      width: 160px; height: 40px;
      display: flex; align-items: center; justify-content: center;
    }
    .slider-track {
      position: relative; width: 140px; height: 36px; border-radius: 18px;
      background-color: transparent; border: 1px solid white;
    }
    .slider-thumb {
      position: absolute; top: 50%; transform: translate(-50%, -50%);
      width: 22px; height: 22px; background-color: transparent;
      border: 1px solid white; border-radius: 50%; cursor: pointer; box-shadow: none;
      transition: border 0.2s ease;
    }
    .slider-thumb:hover { box-shadow: 0 0 8px rgba(0,0,0,0.4); }
    #bg-video-container.active ~ .custom-slider { display: none; }

    #bg-video { width: 100%; height: 100%; object-fit: cover; transition: filter 0.2s ease; }

    .arrow-sequence {
      position: absolute; top: 50%; left: 30px; transform: translateY(-50%);
      display: flex; gap: 4px; pointer-events: none;
    }
    .arrow { width: 28px; height: 28px; stroke: rgb(0,0,0); stroke-width: 1; fill: none; opacity: 0; animation: arrowBlink 1.5s infinite; }
    .arrow:nth-child(1){ animation-delay: 0s; }
    .arrow:nth-child(2){ animation-delay: 0.3s; }
    .arrow:nth-child(3){ animation-delay: 0.6s; }
    @keyframes arrowBlink {
      0%{opacity:0; transform:translateX(0);} 30%{opacity:1; transform:translateX(2px);}
      60%{opacity:0; transform:translateX(4px);} 100%{opacity:0; transform:translateX(0);}
    }
    .arrow-sequence.hidden { display: none !important; }

    .slider-label {
      position: fixed;
      bottom: 110px;
      left: 50%; transform: translateX(-50%);
      font-size: 12px; color: white; font-family: 'Manrope', sans-serif; font-weight: 500;
      z-index: 20; pointer-events: none; opacity: 0.8;
    }

    #bg-video-container.hovered { transform: translate(-50%, -50%) scale(1.03); }
    .video-corner.hovered { transform: translate(-50%, -50%) scale(1.03); }

    .video-wrapper {
      position: fixed; top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      transition: transform 0.4s ease;
      z-index: 3;
    }
    .video-wrapper.hovered { transform: translate(-50%, -50%) scale(1.03); }

    .custom-slider.hidden, .slider-label.hidden { display: none !important; }

    /* =========================================================
       ⬇️ 2초 후 나타나는 EPISODES 버튼 (둥근 테두리 + 내부 '면' 흐름)
       ========================================================= */
    .record-prompt {
      position: fixed;
      left: 50%;
      bottom: 70px;
      transform: translateX(-50%) translateY(6px);
      z-index: 40;
      text-align: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.6s ease, transform 0.6s ease;
    }
    .record-prompt.show {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
      pointer-events: auto;
      cursor: pointer;
    }

    /* 버튼 본체 */
    .record-prompt .pill {
      position: relative;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 10px 18px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.95);
      color: #fff;
      font-size: 15px;
      font-weight: 600;
      letter-spacing: 0.4px;
      overflow: hidden;
      background: rgba(255,255,255,0.08);          /* 배경 비침 */
      backdrop-filter: blur(6px) saturate(115%);
      -webkit-backdrop-filter: blur(6px) saturate(115%);
      transition: transform 0.18s ease, border-color 0.25s ease, background-color 0.25s ease;
      will-change: transform;
    }
    /* 호버 시 살짝 확대 */
    .record-prompt .pill:hover {
      background: rgba(255,255,255,0.12);
      border-color: #fff;
      transform: translateY(-1px) scale(1.04);
    }
    /* 클릭 압력감 */
    .record-prompt .pill:active {
      transform: translateY(0) scale(0.98);
    }

    /* 내부 '면' 그라데이션이 흐르는 애니메이션 */
    .record-prompt .pill::after {
      content: "";
      position: absolute;
      inset: -40%  -20%;          /* pill 밖에서부터 들어오며 부드럽게 */
      border-radius: inherit;
      /* --- 핵심: 선(스트라이프) 대신 '면'이 흐르도록 부드러운 그라데이션  --- */
      background:
        radial-gradient(120% 120% at 0% 50%,
          rgba(255,255,255,0.00) 34%,
          rgba(255,255,255,0.10) 50%,
          rgba(255,255,255,0.00) 66%)
        ,
        linear-gradient(115deg,
          rgba(255,255,255,0.04) 0%,
          rgba(255,255,255,0.12) 50%,
          rgba(255,255,255,0.04) 100%);
      filter: blur(10px);          /* 경계 부드럽게 */
      mix-blend-mode: screen;
      transform: translateX(-60%);
      animation: waterFlow 6s linear infinite;
      opacity: 0.55;
      pointer-events: none;
    }
    @keyframes waterFlow {
      0%   { transform: translateX(-60%); }
      100% { transform: translateX(60%); }
    }

    /* 아이콘 (작은 화살표) */
    .record-prompt .icon {
      width: 16px;
      height: 16px;
      display: inline-block;
    }
    .record-prompt .icon svg {
      width: 100%;
      height: 100%;
      display: block;
    }

    /* === Preloader (Manrope) === */
#preloader{
  position:fixed; inset:0; background:#000; color:#fff;
  display:flex; align-items:center; justify-content:center;
  z-index:99999; font-family:'Manrope', system-ui; 
}
#preloader .pl-wrap{ width:min(460px, 86vw); text-align:center; }
#preloader .pl-percent{
  font-weight:800; font-size:clamp(32px,8vw,80px); line-height:1; letter-spacing:.02em;
}
#preloader .pl-bar{
  width:100%; height:6px; background:rgba(255,255,255,.2);
  border-radius:999px; overflow:hidden; margin-top:16px;
}
#preloader .pl-bar > span{
  display:block; width:0%; height:100%; background:#fff; transform-origin:left center;
  transition: width .15s ease;
}
#preloader .pl-tip{
  margin-top:10px; font-size:14px; letter-spacing:.06em; opacity:.8;
}
#preloader.fade-out{ animation: plFade .5s ease forwards; }
@keyframes plFade { to { opacity:0; visibility:hidden; } }



  </style>
</head>
<body>

  <div id="preloader" aria-live="polite" aria-label="Loading">
  <div class="pl-wrap">
    <div class="pl-percent" id="plPercent">0%</div>
    <div class="pl-bar"><span id="plBar"></span></div>
    <div class="pl-tip">Loading…</div>
  </div>
</div>


  <div id="mobile-bg-image">
    <img src="photo/black.jpg" alt="배경 이미지" />
  </div>

  <div class="year-label">2025</div>

  <div class="crosshair">
    <div class="line vertical"></div>
    <div class="line horizontal"></div>
  </div>

  <div class="video-overlay-texts">
    <div class="play-button"><div class="triangle"></div></div>
  </div>

  <div class="onoff-toggle off" id="onoffToggle">
    <span>ON</span>
    <div class="line"><div class="circle"></div></div>
    <span>OFF</span>
  </div>

  <div class="sound-button hidden-until-expanded" onclick="toggleMute()">
    <span id="sound-label">SOUND OFF</span>
  </div>

  <div class="pov-home" id="pov">TIMELOG</div>

  <div class="video-wrapper" id="video-wrapper">
    <div class="video-corner" id="video-corner">
      <div class="corner top-left"></div>
      <div class="corner top-right-c"></div>
      <div class="corner bottom-left"></div>
      <div class="corner bottom-right"></div>
    </div>

    <div id="bg-video-container" onclick="expandAndPlay()">
      <div id="blur-overlay" class="show"></div>
      <video id="bg-video" loop muted>
        <source src="video/episode0.mp4" type="video/mp4">
      </video>
    </div>
  </div>

  <div class="progress-bar-wrapper">
    <div class="progress-bar" id="progress-bar"></div>
  </div>

  <div id="film-panel" onclick="closeFilmPanel(event)">
    <iframe src="" id="film-iframe"></iframe>
  </div>

  <div class="custom-slider" id="custom-slider">
    <div class="slider-track">
      <div class="slider-thumb" id="slider-thumb"></div>
      <div class="arrow-sequence">
        <svg class="arrow" viewBox="0 0 24 24">
          <polyline points="9 6 15 12 9 18" stroke="white" stroke-width="1" fill="none" />
        </svg>
        <svg class="arrow" viewBox="0 0 24 24">
          <polyline points="9 6 15 12 9 18" stroke="white" stroke-width="1" fill="none" />
        </svg>
        <svg class="arrow" viewBox="0 0 24 24">
          <polyline points="9 6 15 12 9 18" stroke="white" stroke-width="1" fill="none" />
        </svg>
      </div>
    </div>
  </div>

  <div class="slider-label">SLIDER</div>

  <!-- ✅ 2초 뒤에 나타나는 EPISODES 버튼 -->
  <div id="record-prompt" class="record-prompt" aria-label="Open menu">
    <div class="pill">
      <span class="icon" aria-hidden="true">
        <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 6 15 12 9 18"></polyline>
        </svg>
      </span>
      <span>EPISODES</span>
    </div>
  </div>

  <script>
    const onoffToggle = document.getElementById('onoffToggle');

    let percent = 0;
    let isExpanded = false;
    let promptTimer = null;

    const video = document.getElementById('bg-video');
    const soundLabel = document.getElementById('sound-label');
    const videoContainer = document.getElementById('bg-video-container');
    const pov = document.getElementById('pov');
    const progressBar = document.getElementById('progress-bar');
    const corners = document.querySelectorAll('.corner');
    const sliderThumb = document.getElementById("slider-thumb");
    const sliderTrack = document.querySelector(".slider-track");
    const blurOverlay = document.getElementById("blur-overlay");
    const arrowSequence = document.querySelector(".arrow-sequence");
    const recordPrompt = document.getElementById('record-prompt');

    let isMuted = true;
    video.muted = true;
    soundLabel.textContent = 'SOUND OFF';

    function toggleMute() {
      isMuted = !isMuted;
      video.muted = isMuted;
      soundLabel.textContent = isMuted ? 'SOUND OFF' : 'SOUND ON';
    }

    function showRecordPromptAfterDelay() {
      clearTimeout(promptTimer);
      promptTimer = setTimeout(() => {
        recordPrompt.classList.add('show');
      }, 2000); // 2초 지연 후 등장
    }

    function hideRecordPrompt() {
      clearTimeout(promptTimer);
      recordPrompt.classList.remove('show');
    }

    function expandAndPlay() {
      // 슬라이더/텍스트 숨김
      document.querySelector('.custom-slider').classList.add('hidden');
      document.querySelector('.slider-label').classList.add('hidden');

      if (!isExpanded) {
        corners.forEach(corner => corner.classList.add('expand'));

        setTimeout(() => {
          videoContainer.classList.add('active');
          video.play();
          isExpanded = true;

          // 블러 제거
          document.getElementById('blur-overlay').classList.remove('show');

          // 사운드 버튼 표시
          const soundButton = document.querySelector('.sound-button');
          if (soundButton) {
            soundButton.classList.remove('hidden-until-expanded');
            soundButton.style.display = 'block';
          }

          // 오버레이 텍스트 숨김
          const overlayTexts = document.querySelector('.video-overlay-texts');
          if (overlayTexts) overlayTexts.classList.add('hidden');

          // 토글 ON
          onoffToggle.classList.remove('off');
          onoffToggle.classList.add('on');

          // ✅ 2초 후 EPISODES 버튼 등장
          showRecordPromptAfterDelay();
        }, 500);
      }
    }

    // EPISODES 버튼 클릭 → film.html 이동
    recordPrompt.addEventListener('click', () => {
      window.location.href = 'film.html';
    });

    // TIMELOG 클릭 시 축소 상태로 복귀
    pov.addEventListener('click', () => {
      // 슬라이더/텍스트 다시 표시
      document.querySelector('.custom-slider').classList.remove('hidden');
      document.querySelector('.slider-label').classList.remove('hidden');

      video.pause();
      video.currentTime = 0;
      videoContainer.classList.remove('active');
      corners.forEach(corner => corner.classList.remove('expand'));
      isExpanded = false;

      // (있을 수도 있는 외부 버튼 방어)
      const nb = document.getElementById('next-button');
      if (nb) {
        nb.style.opacity = '1';
        nb.style.pointerEvents = 'auto';
      }

      document.getElementById('blur-overlay').classList.add('show');
      document.querySelector('.sound-button').classList.add('hidden-until-expanded');
      document.querySelector('.video-overlay-texts').classList.remove('hidden');

      onoffToggle.classList.remove('on');
      onoffToggle.classList.add('off');

      // 화살표 재표시
      arrowSequence.classList.remove("hidden");

      // ✅ EPISODES 버튼 숨김
      hideRecordPrompt();
    });

    video.addEventListener('timeupdate', () => {
      const percent = (video.currentTime / video.duration) * 100;
      progressBar.style.width = percent + '%';
    });

    // index.html이 아닐 경우 십자선 숨김
    if (!window.location.pathname.endsWith("index.html") && !window.location.pathname.endsWith("/")) {
      const cross = document.querySelector(".crosshair");
      if (cross) cross.classList.add("hidden");
    }

    // 커스텀 슬라이더
    let isDragging = false;
    sliderThumb.style.left = "15px";
    blurOverlay.style.backdropFilter = "blur(20px)";

    sliderThumb.addEventListener("mousedown", (e) => {
      isDragging = true;
      e.preventDefault();
      arrowSequence.classList.add("hidden"); // 드래그 시작 시 화살표 숨김
    });

    document.addEventListener("mouseup", () => { isDragging = false; });

    document.addEventListener("mousemove", (e) => {
      if (!isDragging) return;

      const trackRect = sliderTrack.getBoundingClientRect();
      const thumbRadius = sliderThumb.offsetWidth / 2;
      const margin = 4;
      const minX = thumbRadius + margin;
      const maxX = trackRect.width - thumbRadius - margin;

      let x = e.clientX - trackRect.left;
      x = Math.max(minX, Math.min(x, maxX));

      sliderThumb.style.left = `${x}px`;

      percent = (x - minX) / (maxX - minX);

      const blurValue = 20 * (1 - percent);
      blurOverlay.style.backdropFilter = `blur(${blurValue}px)`;

      // 배경 이미지 블러: 0 → 20
      const bgImage = document.querySelector('#mobile-bg-image img');
      const bgImageBlur = 20 * percent;
      bgImage.style.filter = `grayscale(100%) blur(${bgImageBlur}px)`;

      if (blurValue === 0) {
        blurOverlay.style.backgroundColor = "transparent";
      } else {
        blurOverlay.style.backgroundColor = "rgba(255, 255, 255, 0.1)";
      }
    });

    // 작은 상태에서만 호버 확대
    videoContainer.addEventListener('mouseenter', () => {
      if (!isExpanded) {
        videoContainer.classList.add('hovered');
        document.getElementById('video-corner').classList.add('hovered');
      }
    });
    videoContainer.addEventListener('mouseleave', () => {
      videoContainer.classList.remove('hovered');
      document.getElementById('video-corner').classList.remove('hovered');
    });

(() => {
  const pl = document.getElementById('preloader');
  const plPercent = document.getElementById('plPercent');
  const plBar = document.getElementById('plBar');

  // 수집: 이 페이지에 실제 있는 리소스만
  const imgs = Array.from(document.images);
  // <video> 태그들(소스 파일이 있는 것만)
  const videos = Array.from(document.querySelectorAll('video'))
    .filter(v => (v.currentSrc || (v.querySelector('source') && v.querySelector('source').src)));

  const total = Math.max(1, imgs.length + videos.length); // 0 방지
  let done = 0, shown = 0; // done=실제 로드된 수, shown=부드럽게 보일 퍼센트

  function update() {
    const target = Math.min(100, Math.round((done / total) * 100));
    // 숫자/바를 한 번에 스무딩
    if (shown < target) {
      shown += Math.ceil((target - shown) * 0.4); // 가속 감
      if (shown > target) shown = target;
      plPercent.textContent = shown + '%';
      plBar.style.width = shown + '%';
      requestAnimationFrame(update);
    }
    if (target >= 100) {
      // 살짝 여유를 두고 사라지기
      setTimeout(() => {
        pl.classList.add('fade-out');
        // 스크롤 다시 허용
        document.body.style.overflow = 'auto';
        setTimeout(() => pl.remove(), 520);
      }, 150);
    }
  }

  function markDone() { done++; update(); }

  // 이미지 로더
  imgs.forEach(img => {
    if (img.complete && img.naturalWidth > 0) { markDone(); return; }
    const probe = new Image();
    probe.onload = markDone;
    probe.onerror = markDone;
    probe.src = img.currentSrc || img.src;
  });

  // 비디오 로더 (canplaythrough + 안전 타임아웃)
  videos.forEach(v => {
    let resolved = false;
    const clear = () => { if (!resolved) { resolved = true; markDone(); } };
    const timer = setTimeout(clear, 6000); // 네트워크 느릴 때도 종료되도록

    const onReady = () => { clearTimeout(timer); clear(); };
    v.addEventListener('canplaythrough', onReady, { once:true });
    v.addEventListener('loadeddata', onReady, { once:true });
    v.addEventListener('error', onReady, { once:true });

    // 미리 살짝 로드 트리거
    // iOS 등 자동재생 제한이 있어 play는 안 건드리고, load만 유도
    try { v.load && v.load(); } catch(e){}
  });

  // 혹시 리소스가 아예 없으면 바로 100%
  if (total === 1 && imgs.length === 0 && videos.length === 0) { done = 1; update(); }

  // 첫 프레임 표시
  update();

  // 초기엔 스크롤 잠금(페이지 CSS에 이미 overflow:hidden이면 생략 가능)
  document.body.style.overflow = 'hidden';
})();




  </script>
</body>
</html>
